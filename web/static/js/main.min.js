!function(e,t){"function"==typeof define&&define.amd?define([],t):e.visualCaptcha=t()}(this,function(){var e,t,a;return function(n){function i(e,t){return y.call(e,t)}function r(e,t){var a,n,i,r,o,s,c,l,u,d,f,p=t&&t.split("/"),h=v.map,m=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),o=(e=e.split("/")).length-1,v.nodeIdCompat&&k.test(e[o])&&(e[o]=e[o].replace(k,"")),e=p.concat(e),u=0;u<e.length;u+=1)if("."===(f=e[u]))e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&h){for(u=(a=e.split("/")).length;u>0;u-=1){if(n=a.slice(0,u).join("/"),p)for(d=p.length;d>0;d-=1)if((i=h[p.slice(0,d).join("/")])&&(i=i[n])){r=i,s=u;break}if(r)break;!c&&m&&m[n]&&(c=m[n],l=u)}!r&&c&&(r=c,s=l),r&&(a.splice(0,s,r),e=a.join("/"))}return e}function o(e,t){return function(){return d.apply(n,b.call(arguments,0).concat([e,t]))}}function s(e){return function(t){h[e]=t}}function c(e){if(i(m,e)){var t=m[e];delete m[e],g[e]=!0,u.apply(n,t)}if(!i(h,e)&&!i(g,e))throw new Error("No "+e);return h[e]}function l(e){var t,a=e?e.indexOf("!"):-1;return a>-1&&(t=e.substring(0,a),e=e.substring(a+1,e.length)),[t,e]}var u,d,f,p,h={},m={},v={},g={},y=Object.prototype.hasOwnProperty,b=[].slice,k=/\.js$/;f=function(e,t){var a,n=l(e),i=n[0];return e=n[1],i&&(a=c(i=r(i,t))),i?e=a&&a.normalize?a.normalize(e,function(e){return function(t){return r(t,e)}}(t)):r(e,t):(i=(n=l(e=r(e,t)))[0],e=n[1],i&&(a=c(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:a}},p={require:function(e){return o(e)},exports:function(e){var t=h[e];return void 0!==t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:function(e){return function(){return v&&v.config&&v.config[e]||{}}}(e)}}},u=function(e,t,a,r){var l,u,d,v,y,b,k=[],x=typeof a;if(r=r||e,"undefined"===x||"function"===x){for(t=!t.length&&a.length?["require","exports","module"]:t,y=0;y<t.length;y+=1)if(v=f(t[y],r),"require"===(u=v.f))k[y]=p.require(e);else if("exports"===u)k[y]=p.exports(e),b=!0;else if("module"===u)l=k[y]=p.module(e);else if(i(h,u)||i(m,u)||i(g,u))k[y]=c(u);else{if(!v.p)throw new Error(e+" missing "+u);v.p.load(v.n,o(r,!0),s(u),{}),k[y]=h[u]}d=a?a.apply(h[e],k):void 0,e&&(l&&l.exports!==n&&l.exports!==h[e]?h[e]=l.exports:d===n&&b||(h[e]=d))}else e&&(h[e]=a)},e=t=d=function(e,t,a,i,r){if("string"==typeof e)return p[e]?p[e](t):c(f(e,t).f);if(!e.splice){if((v=e).deps&&d(v.deps,v.callback),!t)return;t.splice?(e=t,t=a,a=null):e=n}return t=t||function(){},"function"==typeof a&&(a=i,i=r),i?u(n,e,t,a):setTimeout(function(){u(n,e,t,a)},4),d},d.config=function(e){return d(e)},e._defined=h,(a=function(e,t,a){t.splice||(a=t,t=[]),i(h,e)||i(m,e)||(m[e]=[e,t,a])}).amd={jQuery:!0}}(),a("almond",function(){}),a("visualcaptcha/core",[],function(){"use strict";var e,t,a,n,i,r,o,s;return e=function(e,t,a){return a=a||[],e.namespace&&e.namespace.length>0&&a.push(e.namespaceFieldName+"="+e.namespace),a.push(e.randomParam+"="+e.randomNonce),t+"?"+a.join("&")},t=function(e){var t,n=this;e.applyRandomNonce(),e.isLoading=!0,t=a(e),e._loading(n),e.callbacks.loading&&e.callbacks.loading(n),e.request(t,function(t){t.audioFieldName&&(e.audioFieldName=t.audioFieldName),t.imageFieldName&&(e.imageFieldName=t.imageFieldName),t.imageName&&(e.imageName=t.imageName),t.values&&(e.imageValues=t.values),e.isLoading=!1,e.hasLoaded=!0,e._loaded(n),e.callbacks.loaded&&e.callbacks.loaded(n)})},a=function(t){var a=t.url+t.routes.start+"/"+t.numberOfImages;return e(t,a)},n=function(t,a){var n="",i=[];return a<0||a>=t.numberOfImages?n:(this.isRetina()&&i.push("retina=1"),n=t.url+t.routes.image+"/"+a,e(t,n,i))},i=function(t,a){var n=t.url+t.routes.audio;return a&&(n+="/ogg"),e(t,n)},r=function(e,t){return t>=0&&t<e.numberOfImages?e.imageValues[t]:""},o=function(){return void 0!==window.devicePixelRatio&&window.devicePixelRatio>1},s=function(){return!1},function(e){var a,c,l,u,d,f,p,h,m,v,g,y,b;return c=function(){return t.call(this,e)},l=function(){return e.isLoading},u=function(){return e.hasLoaded},d=function(){return e.imageValues.length},f=function(){return e.imageName},p=function(t){return r.call(this,e,t)},h=function(t){return n.call(this,e,t)},m=function(t){return i.call(this,e,t)},v=function(){return e.imageFieldName},g=function(){return e.audioFieldName},y=function(){return e.namespace},b=function(){return e.namespaceFieldName},a={refresh:c,isLoading:l,hasLoaded:u,numberOfImages:d,imageName:f,imageValue:p,imageUrl:h,audioUrl:m,imageFieldName:v,audioFieldName:g,namespace:y,namespaceFieldName:b,isRetina:o,supportsAudio:s},e.autoRefresh&&a.refresh(),a}}),a("visualcaptcha/xhr-request",[],function(){"use strict";var e=window.XMLHttpRequest;return function(t,a){var n=new e;n.open("GET",t,!0),n.onreadystatechange=function(){var e;4===n.readyState&&200===n.status&&(e=JSON.parse(n.responseText),a(e))},n.send()}}),a("visualcaptcha/config",["visualcaptcha/xhr-request"],function(e){"use strict";return function(t){var a=window.location.href.split("/");a[a.length-1]="";var n={request:e,url:a.join("/").slice(0,-1),namespace:"",namespaceFieldName:"namespace",routes:{start:"/start",image:"/image",audio:"/audio"},isLoading:!1,hasLoaded:!1,autoRefresh:!0,numberOfImages:6,randomNonce:"",randomParam:"r",audioFieldName:"",imageFieldName:"",imageName:"",imageValues:[],callbacks:{},_loading:function(){},_loaded:function(){}};return n.applyRandomNonce=function(){return n.randomNonce=Math.random().toString(36).substring(2)},t.request&&(n.request=t.request),t.url&&(n.url=t.url),t.namespace&&(n.namespace=t.namespace),t.namespaceFieldName&&(n.namespaceFieldName=t.namespaceFieldName),void 0!==t.autoRefresh&&(n.autoRefresh=t.autoRefresh),t.numberOfImages&&(n.numberOfImages=t.numberOfImages),t.routes&&(t.routes.start&&(n.routes.start=t.routes.start),t.routes.image&&(n.routes.image=t.routes.image),t.routes.audio&&(n.routes.audio=t.routes.audio)),t.randomParam&&(n.randomParam=t.randomParam),t.callbacks&&(t.callbacks.loading&&(n.callbacks.loading=t.callbacks.loading),t.callbacks.loaded&&(n.callbacks.loaded=t.callbacks.loaded)),t._loading&&(n._loading=t._loading),t._loaded&&(n._loaded=t._loaded),n}}),a("visualcaptcha",["require","visualcaptcha/core","visualcaptcha/config"],function(e){"use strict";var t=e("visualcaptcha/core"),a=e("visualcaptcha/config");return function(e){return e=e||{},t(a(e))}}),a("visualcaptcha/deep-extend",[],function(){"use strict";var e;return e=function(t,a){t=t||{};for(var n in a)a[n]&&a[n].constructor&&a[n].constructor===Object?(t[n]=t[n]||{},e(t[n],a[n])):t[n]=a[n];return t}}),a("visualcaptcha/helpers",[],function(){"use strict";var e,t,a,n,i,r,o;return e=function(e,t){return t?e[0]:Array.prototype.slice.call(e)},t=function(t,a,n){var i=t.getElementsByClassName(a);return e(i,n)},a=function(t,a,n){var i=t.getElementsByTagName(a);return e(i,n)},n=function(e,t){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");return e.className&&a.test(e.className)},i=function(e,t){if(Array.isArray(e))for(var a=0;a<e.length;a++)i(e[a],t);else n(e,t)||(e.className.length>0?e.className+=" "+t:e.className=t)},r=function(e,t){var a;if(Array.isArray(e))for(var n=0;n<e.length;n++)r(e[n],t);else a=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(a," ").replace(/(^\s*)|(\s*$)/g,"")},o=function(e,t){if(Array.isArray(e))for(var a=0;a<e.length;a++)o(e[a],t);else e.addEventListener?e.addEventListener("click",t,!1):e.attachEvent("onclick",t)},{findByClass:t,findByTag:a,hasClass:n,addClass:i,removeClass:r,bindClick:o}}),a("visualcaptcha/templates",[],function(){"use strict";var e,t,a,n,i,r,o;return e=function(e,t){for(var a in t)e=e.replace(new RegExp("{"+a+"}","g"),t[a]);return e},t=function(t,a,n){var i;return'<div class="visualCaptcha-accessibility-button"><a href="#"><img src="{path}accessibility{retinaExtra}.png" title="{accessibilityTitle}" alt="{accessibilityAlt}" /></a></div>','<div class="visualCaptcha-refresh-button"><a class="btn blue" href="#" title="{refreshTitle}" alt="{refreshAlt}"><i class="fas fa-sync"></i></a></div>',"",i={path:n||"",refreshTitle:a.refreshTitle,refreshAlt:a.refreshAlt,accessibilityTitle:a.accessibilityTitle,accessibilityAlt:a.accessibilityAlt,retinaExtra:t.isRetina()?"@2x":""},e("",i)},a=function(t,a){var n,i;return t.supportsAudio()?(n='<div class="visualCaptcha-accessibility-wrapper visualCaptcha-hide"><div class="accessibility-description">{accessibilityDescription}</div><audio preload="preload"><source src="{audioURL}" type="audio/ogg" /><source src="{audioURL}" type="audio/mpeg" /></audio></div>',i={accessibilityDescription:a.accessibilityDescription,audioURL:t.audioUrl(),audioFieldName:t.audioFieldName()},e(n,i)):""},n=function(t,a){for(var n,i,r="",o=0,s=t.numberOfImages();o<s;o++)n='<div class="img"><a href="#"><img src="{imageUrl}" id="visualCaptcha-img-{i}" data-index="{i}" alt="" title="" /></a></div>',i={imageUrl:t.imageUrl(o),i:o},r+=e(n,i);return n='<p class="visualCaptcha-explanation">{explanation}</p><div class="visualCaptcha-possibilities">{images}</div>',i={imageFieldName:t.imageFieldName(),explanation:a.explanation.replace(/ANSWER/,t.imageName()),images:r},e(n,i)},i=function(t){var a,n;return a='<input class="form-control audioField" type="text" name="{audioFieldName}" value="" autocomplete="off" />',n={audioFieldName:t.audioFieldName()},e(a,n)},r=function(t,a){var n,i;return n='<input class="form-control imageField" type="hidden" name="{imageFieldName}" value="{value}" readonly="readonly" />',i={imageFieldName:t.imageFieldName(),value:t.imageValue(a)},e(n,i)},o=function(t){var a,n,i=t.namespace();return i&&0!==i.length?(a='<input type="hidden" name="{fieldName}" value="{value}" />',n={fieldName:t.namespaceFieldName(),value:i},e(a,n)):""},{buttons:t,accessibility:a,images:n,audioInput:i,imageInput:r,namespaceInput:o}}),a("visualcaptcha/language",[],function(){"use strict";return{accessibilityAlt:"Sound icon",accessibilityTitle:"Accessibility option: listen to a question and answer it!",accessibilityDescription:"Type below the <strong>answer</strong> to what you hear. Numbers or words:",explanation:"<strong>ANSWER</strong>",refreshAlt:"Refresh/reload icon",refreshTitle:"Refresh/reload images!"}}),a("visualcaptcha.vanilla",["visualcaptcha","visualcaptcha/deep-extend","visualcaptcha/helpers","visualcaptcha/templates","visualcaptcha/language"],function(e,t,a,n,i){"use strict";var r,o,s,c;return r=function(){},o=function(e,t){var i,r,o=e.config;i=n.namespaceInput(t)+n.accessibility(t,o.language)+n.images(t,o.language)+n.buttons(t,o.language,o.imgPath),e.innerHTML=i,r=a.findByClass(e,"visualCaptcha-possibilities",!0),a.bindClick(a.findByClass(r,"img"),s.bind(null,e,t))},function(e,t){var i,r,o,s,c=a.findByClass(e,"visualCaptcha-accessibility-wrapper",!0),l=a.findByClass(e,"visualCaptcha-possibilities",!0),u=a.findByClass(e,"visualCaptcha-explanation",!0),d=a.findByTag(c,"audio",!0);a.hasClass(c,"visualCaptcha-hide")?(a.addClass(l,"visualCaptcha-hide"),a.addClass(u,"visualCaptcha-hide"),i=a.findByClass(l,"img"),a.removeClass(i,"visualCaptcha-selected"),void 0!==(r=a.findByTag(u,"input",!0))&&(r.value=""),s=n.audioInput(t),c.innerHTML=c.innerHTML.replace("<audio",s+"<audio"),a.removeClass(c,"visualCaptcha-hide"),d.load(),d.play()):(d.pause(),a.addClass(c,"visualCaptcha-hide"),o=a.findByTag(c,"input",!0),c.removeChild(o),a.removeClass(u,"visualCaptcha-hide"),a.removeClass(l,"visualCaptcha-hide"))},s=function(e,t,i){var r,o,s,c,l,u=i.currentTarget,d=a.findByClass(e,"visualCaptcha-possibilities",!0),f=a.findByClass(e,"visualCaptcha-explanation",!0);(c=a.findByTag(f,"input",!0))&&(f.removeChild(c),o=a.findByClass(d,"img"),a.removeClass(o,"visualCaptcha-selected")),a.addClass(u,"visualCaptcha-selected"),r=a.findByTag(u,"img",!0),s=parseInt(r.getAttribute("data-index"),10),l=n.imageInput(t,s),f.innerHTML+=l},function(e,t){t.refresh()},c=function(e){var t=a.findByClass(e,"imageField",!0)||{},n=a.findByClass(e,"audioField",!0)||{},i=!(!t.value&&!n.value);return i?{valid:i,name:t.value?t.name:n.name,value:t.value?t.value:n.value}:{valid:i}},function(n,s){var l,u,d;return l=t({imgPath:"/",language:i,captcha:{}},s),n="string"==typeof n?document.getElementById(n):n,n.config=l,a.addClass(n,"visualCaptcha"),d=t(l.captcha,{_loading:r.bind(null,n),_loaded:o.bind(null,n)}),void 0!==n.getAttribute("data-namespace")&&(d.namespace=n.getAttribute("data-namespace")),u=e(d),u.getCaptchaData=c.bind(null,n),"function"==typeof l.init&&l.init.call(null,u),u}}),t("visualcaptcha.vanilla")}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClipboardJS=t():e.ClipboardJS=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,a){var n,i,r;i=[e,a(7)],void 0!==(r="function"==typeof(n=function(e,t){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(t),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,a.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,a.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":n(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=r})?n.apply(t,i):n)&&(e.exports=r)},function(e,t,a){function n(e,t,a){if(!e&&!t&&!a)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(a))throw new TypeError("Third argument must be a Function");if(i.node(e))return function(e,t,a){return e.addEventListener(t,a),{destroy:function(){e.removeEventListener(t,a)}}}(e,t,a);if(i.nodeList(e))return function(e,t,a){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,a)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,a)})}}}(e,t,a);if(i.string(e))return function(e,t,a){return r(document.body,e,t,a)}(e,t,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}var i=a(6),r=a(5);e.exports=n},function(e,t){function a(){}a.prototype={on:function(e,t,a){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:a}),this},once:function(e,t,a){function n(){i.off(e,n),t.apply(a,arguments)}var i=this;return n._=t,this.on(e,n,a)},emit:function(e){var t=[].slice.call(arguments,1),a=((this.e||(this.e={}))[e]||[]).slice(),n=0,i=a.length;for(n;n<i;n++)a[n].fn.apply(a[n].ctx,t);return this},off:function(e,t){var a=this.e||(this.e={}),n=a[e],i=[];if(n&&t)for(var r=0,o=n.length;r<o;r++)n[r].fn!==t&&n[r].fn._!==t&&i.push(n[r]);return i.length?a[e]=i:delete a[e],this}},e.exports=a},function(e,t,a){var n,i,r;i=[e,a(0),a(2),a(1)],void 0!==(r="function"==typeof(n=function(e,t,a,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a="data-clipboard-"+e;if(t.hasAttribute(a))return t.getAttribute(a)}var o=i(t),s=i(a),c=i(n),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.resolveOptions(a),n.listenClick(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),u(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===l(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,c.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return r("action",e)}},{key:"defaultTarget",value:function(e){var t=r("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return r("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,a=!!document.queryCommandSupported;return t.forEach(function(e){a=a&&!!document.queryCommandSupported(e)}),a}}]),t}();e.exports=d})?n.apply(t,i):n)&&(e.exports=r)},function(e,t){var a=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}e.exports=function(e,t){for(;e&&e.nodeType!==a;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},function(e,t,a){function n(e,t,a,n,r){var o=i.apply(this,arguments);return e.addEventListener(a,o,r),{destroy:function(){e.removeEventListener(a,o,r)}}}function i(e,t,a,n){return function(a){a.delegateTarget=r(a.target,t),a.delegateTarget&&n.call(e,a)}}var r=a(4);e.exports=function(e,t,a,i,r){return"function"==typeof e.addEventListener?n.apply(null,arguments):"function"==typeof a?n.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return n(e,t,a,i,r)}))}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var a=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===a||"[object HTMLCollection]"===a)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var a=e.hasAttribute("readonly");a||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),a||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),t=n.toString()}return t}}])}),document.body.classList.remove("no-js");var http=new(http=function(){this.toParam=function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},this.fromParam=function(e){return JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')},this.get=function(e,t){var a=this.toParam(e.data),n=new XMLHttpRequest;if(n.onreadystatechange=function(){4==n.readyState&&200==n.status&&t(n.responseText)},n.open("GET",e.url+"?"+a,!0),void 0!==e.headers)for(var i in e.headers)e.headers.hasOwnProperty(i)&&n.setRequestHeader(i,e.headers[i]);return n.send(null),n},this.post=function(e,t){void 0===t&&(t=function(){});var a=!0;try{e.data.entries()}catch(e){a=!1}var n=new XMLHttpRequest;if(n.onreadystatechange=function(){4==n.readyState&&200==n.status&&t(n.responseText)},n.open("POST",e.url,!0),void 0!==e.headers)for(var i in e.headers)e.headers.hasOwnProperty(i)&&n.setRequestHeader(i,e.headers[i]);if(a)n.send(e.data);else{var r=this.toParam(e.data);n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(r)}return n}});new ClipboardJS(".clip",{text:function(e){for(var t=e.nextElementSibling.nextElementSibling.querySelectorAll(".link > a"),a=[],n=0;n<t.length;n++){var i=t[n];a.push(i.href)}return a.join("\n")}}),document.addEventListener("click",function(e){if(e.target&&e.target.classList.contains("open-all")||e.target.closest(".open-all")){var t=e.target;e.target.closest(".open-all")&&(t=e.target.closest(".open-all"));for(var a=[],n=t.nextElementSibling.nextElementSibling.nextElementSibling.querySelectorAll(".link > a"),i=0;i<n.length;i++){var r=n[i];a.push(r.href)}for(var o=0,i=0;i<a.length;i++)navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(e){setTimeout(function(){var t=document.createElement("a");t.download="",t.href=a[e],t.target="_blank",t.dispatchEvent(new MouseEvent("click"))},100*++o)}(i):function(e){setTimeout(function(){window.open(a[e],"_blank")},1e3)}(i)}},!1),document.querySelector("#search-bar").addEventListener("submit",function(e){e.preventDefault();var t=this.querySelector('input[name="t"]').value,a=this.querySelector('[name="c"]').value,n=this.querySelector('[name="r"]').value;""===t&&(t="all"),n="any"!==n?"/"+n:"",window.location.href="/search/"+a+"/"+encodeURIComponent(t)+n});var captcha;document.addEventListener("click",function(e){if(e.target&&e.target.matches(".__vote-modal-trigger")){e.stopPropagation(),e.preventDefault();var t=parseInt(e.target.dataset.id);document.getElementById("vote-captcha-wrap").classList.remove("hidden"),captcha=visualCaptcha("vote-captcha",{captcha:{numberOfImages:8,url:window.location.origin+"/api/captcha",randomParam:"what-are-you-looking-at",routes:{start:"/begin",image:"/img"},callbacks:{loaded:function(a){a.releaseId=t,a.voteTrigger=e.target;var n=document.getElementById("vote-captcha").getElementsByClassName("img");Array.prototype.slice.call(n).forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()},!1)})}}}})}if(e.target&&e.target.matches("#vote-btn")){e.preventDefault(),e.stopPropagation();var a=captcha.getCaptchaData();if(a.valid){var n=captcha.imageFieldName(),i=a.value,r={rom_id:captcha.releaseId};r[n]=i;var o=document.getElementById("vote-captcha-message"),s=document.getElementById("vote-captcha-success");http.post({url:"/api/captcha/vote",data:r},function(e){var t=JSON.parse(e);t.SUCCESS?(captcha.voteTrigger.classList.add("hidden"),document.querySelector(".__vote-modal-trigger").classList.add("hidden"),document.querySelector("#vote-captcha").classList.add("hidden"),document.querySelector("#vote-btn").classList.add("hidden"),s.classList.remove("hidden"),o.classList.add("hidden")):(captcha.refresh(),s.classList.add("hidden"),o.classList.remove("hidden"),o.innerText=t.MSG)})}}},!1);